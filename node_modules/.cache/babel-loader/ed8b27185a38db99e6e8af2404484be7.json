{"remainingRequest":"C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\src\\Modeules\\home.js","dependencies":[{"path":"C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\src\\Modeules\\home.js","mtime":1569675555863},{"path":"C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport Vue from 'vue';\nvar state = {\n  defaultLocation: null,\n  cityDetails: {\n    key: '',\n    regionID: '',\n    city: '',\n    tempC: '',\n    tempF: '',\n    WeatherText: '',\n    fiveForecast: []\n  },\n  gpURL: 'http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&q=',\n  autoCompSearchURL: 'http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&q=',\n  conditionURL: 'http://dataservice.accuweather.com/currentconditions/v1/',\n  fiveForecastURL: 'http://dataservice.accuweather.com/forecasts/v1/daily/5day/',\n  searchField: '',\n  autoCompleteTxT: [],\n  autoCompleteKey: []\n};\nvar getters = {\n  defaultLocation: function defaultLocation(state) {\n    return state.defaultLocation;\n  },\n  cityDetails: function cityDetails(state) {\n    return state.cityDetails;\n  },\n  gpURL: function gpURL(state) {\n    return state.gpURL;\n  },\n  fiveForecast: function fiveForecast(state) {\n    return state.cityDetails.fiveForecast;\n  },\n  getAutoCompleteTxT: function getAutoCompleteTxT(state) {\n    return state.autoCompleteTxT;\n  }\n};\nvar actions = {\n  setUserLocationByDefault: function setUserLocationByDefault(contex) {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      contex.state.defaultLocation = position;\n      contex.dispatch('getDefaultLocation');\n    });\n  },\n  getDefaultLocation: function getDefaultLocation(contex) {\n    var lat = contex.state.defaultLocation.coords.latitude;\n    var lon = contex.state.defaultLocation.coords.longitude;\n    var fullURL = contex.getters.gpURL + lat + '%2C' + lon + '&language=en&toplevel=true';\n    Vue.axios.get(fullURL).then(function (response) {\n      var data = response.data;\n      contex.state.cityDetails.city = data.EnglishName;\n      contex.state.cityDetails.key = data.Key;\n      contex.state.cityDetails.regionID = data.Country.ID;\n      contex.dispatch('getWeather');\n      contex.dispatch('getFiveForecast');\n    }).catch(function (err) {\n      Vue.toasted.show(err.message, contex.getters.toastOptions);\n    });\n  },\n  userSearch: function userSearch(contex, userLocation) {\n    if (userLocation !== '' && userLocation !== undefined) {\n      var fullURL = contex.state.autoCompSearchURL + userLocation + '&language=en';\n      Vue.axios.get(fullURL).then(function (response) {\n        var data = response.data;\n        contex.state.cityDetails.city = data[0].LocalizedName;\n        contex.state.cityDetails.key = data[0].Key;\n        contex.state.cityDetails.regionID = data[0].Country.ID;\n        contex.dispatch('getWeather');\n        contex.dispatch('getFiveForecast');\n      }).catch(function (err) {\n        Vue.toasted.show(err.message, contex.getters.toastOptions);\n      });\n    }\n  },\n  getWeather: function getWeather(contex) {\n    var key = contex.state.cityDetails.key;\n    var fullURL = contex.state.conditionURL + key + \"?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&language=en&details=true\";\n    Vue.axios.get(fullURL).then(function (response) {\n      var data = response.data;\n      contex.state.cityDetails.tempC = data[0].Temperature.Metric.Value;\n      contex.state.cityDetails.tempF = data[0].Temperature.Imperial.Value;\n      contex.state.cityDetails.WeatherText = data[0].WeatherText;\n    }).catch(function (err) {\n      Vue.toasted.show(err.message, contex.getters.toastOptions);\n    });\n  },\n  getFiveForecast: function getFiveForecast(contex) {\n    var key = contex.state.cityDetails.key;\n    var fullURL = contex.state.fiveForecastURL + key + \"?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&language=en&details=true&metric=true\";\n    var Days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu'];\n    Vue.axios.get(fullURL).then(function (response) {\n      var data = response.data.DailyForecasts;\n      var days = [];\n\n      for (var i = 0; i < data.length; i++) {\n        var day = {\n          Day: Days[i],\n          Temperature: data[i].Temperature.Maximum.Value\n        };\n        days.push(day);\n      }\n\n      contex.state.cityDetails.fiveForecast = days;\n    }).catch(function (err) {\n      Vue.toasted.show(err.message, contex.getters.toastOptions);\n    });\n  },\n  setAutoComplete: function setAutoComplete(contex, search) {\n    if (search !== '' && search !== undefined) {\n      var found = contex.state.autoCompleteKey.find(function (e) {\n        return e.cityNameDesc === search;\n      });\n\n      if (typeof found !== 'undefined') {\n        contex.state.cityDetails.city = found.cityName;\n        contex.state.cityDetails.key = found.key;\n        contex.state.cityDetails.regionID = found.ID;\n        contex.dispatch('getWeather');\n        contex.dispatch('getFiveForecast');\n      } else {\n        var fullURL = contex.state.autoCompSearchURL + search + '&language=en';\n        Vue.axios.get(fullURL).then(function (response) {\n          var data = response.data;\n          contex.state.autoCompleteTxT = [];\n          contex.state.autoCompleteKey = [];\n\n          for (var i = 0; i < data.length; i++) {\n            contex.state.autoCompleteTxT.push(data[i].LocalizedName + ' , ' + data[i].Country.LocalizedName);\n            var city = {\n              key: data[i].Key,\n              cityNameDesc: data[i].LocalizedName + ' , ' + data[i].Country.LocalizedName,\n              ID: data[i].Country.ID,\n              cityName: data[i].LocalizedName\n            };\n            contex.state.autoCompleteKey.push(city);\n          }\n        }).catch(function (err) {\n          Vue.toasted.show(err.message, contex.getters.toastOptions);\n        });\n      }\n    }\n  }\n};\nvar mutations = {};\nexport default {\n  mutations: mutations,\n  actions: actions,\n  getters: getters,\n  state: state\n};",{"version":3,"sources":["C:\\Users\\LeonAzraev\\Desktop\\AcuWeather\\weatherapp\\src\\Modeules\\home.js"],"names":["Vue","state","defaultLocation","cityDetails","key","regionID","city","tempC","tempF","WeatherText","fiveForecast","gpURL","autoCompSearchURL","conditionURL","fiveForecastURL","searchField","autoCompleteTxT","autoCompleteKey","getters","getAutoCompleteTxT","actions","setUserLocationByDefault","contex","navigator","geolocation","getCurrentPosition","position","dispatch","getDefaultLocation","lat","coords","latitude","lon","longitude","fullURL","axios","get","then","response","data","EnglishName","Key","Country","ID","catch","err","toasted","show","message","toastOptions","userSearch","userLocation","undefined","LocalizedName","getWeather","Temperature","Metric","Value","Imperial","getFiveForecast","Days","DailyForecasts","days","i","length","day","Day","Maximum","push","setAutoComplete","search","found","find","e","cityNameDesc","cityName","mutations"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nconst state = {\r\n  defaultLocation: null,\r\n  cityDetails: {\r\n    key: '',\r\n    regionID: '',\r\n    city: '',\r\n    tempC: '',\r\n    tempF: '',\r\n    WeatherText: '',\r\n    fiveForecast: [],\r\n\r\n  },\r\n  gpURL: 'http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&q=',\r\n  autoCompSearchURL: 'http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&q=',\r\n  conditionURL: 'http://dataservice.accuweather.com/currentconditions/v1/',\r\n  fiveForecastURL: 'http://dataservice.accuweather.com/forecasts/v1/daily/5day/',\r\n  searchField: '',\r\n  autoCompleteTxT: [],\r\n  autoCompleteKey:[]\r\n\r\n}\r\nconst getters = {\r\n  defaultLocation: state => {\r\n    return state.defaultLocation;\r\n  },\r\n  cityDetails: state => {\r\n    return state.cityDetails;\r\n  },\r\n  gpURL: state => {\r\n    return state.gpURL;\r\n  },\r\n  fiveForecast: state =>{\r\n    return state.cityDetails.fiveForecast;\r\n  },\r\n  getAutoCompleteTxT: state =>{\r\n    return state.autoCompleteTxT;\r\n  }\r\n}\r\nconst actions = {\r\n  setUserLocationByDefault: contex => {\r\n    navigator.geolocation.getCurrentPosition(position => {\r\n      contex.state.defaultLocation = position;\r\n\r\n      contex.dispatch('getDefaultLocation')\r\n    })\r\n  },\r\n  getDefaultLocation: contex => {\r\n\r\n    const lat = contex.state.defaultLocation.coords.latitude;\r\n    const lon = contex.state.defaultLocation.coords.longitude;\r\n    const fullURL = contex.getters.gpURL + lat + '%2C' + lon + '&language=en&toplevel=true';\r\n\r\n          Vue.axios.get(fullURL)\r\n            .then(response => {\r\n              const data = response.data;\r\n              contex.state.cityDetails.city = data.EnglishName;\r\n              contex.state.cityDetails.key = data.Key;\r\n              contex.state.cityDetails.regionID = data.Country.ID;\r\n              contex.dispatch('getWeather');\r\n              contex.dispatch('getFiveForecast');\r\n            })\r\n            .catch(err => {\r\n              Vue.toasted.show(err.message,contex.getters.toastOptions);\r\n\r\n            })\r\n            \r\n\r\n  },\r\n  userSearch: (contex, userLocation) => {\r\n    if (userLocation !== '' && userLocation !== undefined) {\r\n      const fullURL = contex.state.autoCompSearchURL + userLocation + '&language=en';\r\n      Vue.axios.get(fullURL)\r\n      .then(response =>{\r\n        const data = response.data;\r\n        contex.state.cityDetails.city = data[0].LocalizedName;\r\n        contex.state.cityDetails.key = data[0].Key;\r\n        contex.state.cityDetails.regionID = data[0].Country.ID;\r\n        contex.dispatch('getWeather');\r\n        contex.dispatch('getFiveForecast');\r\n      })\r\n      .catch( err=>{\r\n        Vue.toasted.show(err.message,contex.getters.toastOptions);\r\n      })\r\n      \r\n    }\r\n  },\r\n  getWeather: contex => {\r\n    const key = contex.state.cityDetails.key;\r\n    const fullURL = contex.state.conditionURL + key + \"?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&language=en&details=true\";\r\n    Vue.axios.get(fullURL)\r\n    .then(response =>{\r\n      const data = response.data;\r\n      contex.state.cityDetails.tempC = data[0].Temperature.Metric.Value;\r\n      contex.state.cityDetails.tempF = data[0].Temperature.Imperial.Value;\r\n      contex.state.cityDetails.WeatherText = data[0].WeatherText;\r\n    })\r\n    .catch( err=>{\r\n      Vue.toasted.show(err.message,contex.getters.toastOptions);\r\n    })\r\n  },\r\n  getFiveForecast: contex =>{\r\n\r\n    const key = contex.state.cityDetails.key;\r\n    const fullURL = contex.state.fiveForecastURL + key + \"?apikey=Z7JVNAivjdUnvPlYy2RG5zWWukRpTXdv&language=en&details=true&metric=true\";\r\n    let Days = ['Sun', 'Mon' , 'Tue' ,'Wed','Thu'];\r\n    Vue.axios.get(fullURL)\r\n    .then(response =>{\r\n      const data = response.data.DailyForecasts;\r\n      const days =[];\r\n      for(let i=0;i<data.length;i++)\r\n      { \r\n          const day = {Day: Days[i] , Temperature: data[i].Temperature.Maximum.Value};\r\n          \r\n          days.push(day);\r\n      }\r\n      contex.state.cityDetails.fiveForecast = days;\r\n\r\n   \r\n    })\r\n    .catch( err=>{\r\n      Vue.toasted.show(err.message,contex.getters.toastOptions);    })\r\n  },\r\n  setAutoComplete: (contex,search) =>{\r\n\r\n    if (search !== '' && search !== undefined) {\r\n\r\n      const found = contex.state.autoCompleteKey.find(e=> e.cityNameDesc === search);\r\n      if((typeof found) !== 'undefined')\r\n      {\r\n        contex.state.cityDetails.city = found.cityName;\r\n        contex.state.cityDetails.key = found.key;\r\n        contex.state.cityDetails.regionID = found.ID;\r\n        contex.dispatch('getWeather');\r\n        contex.dispatch('getFiveForecast');\r\n      }\r\n      else{\r\n      const fullURL = contex.state.autoCompSearchURL + search + '&language=en';\r\n      Vue.axios.get(fullURL)\r\n      .then(response =>{\r\n        const data = response.data;\r\n        contex.state.autoCompleteTxT = [];\r\n        contex.state.autoCompleteKey = [];\r\n        for(let i=0 ; i < data.length ; i++)\r\n        {\r\n          contex.state.autoCompleteTxT.push(data[i].LocalizedName + ' , ' + data[i].Country.LocalizedName);\r\n          const city = {key: data[i].Key\r\n          ,cityNameDesc: data[i].LocalizedName + ' , ' + data[i].Country.LocalizedName\r\n          ,ID: data[i].Country.ID\r\n          ,cityName:  data[i].LocalizedName}\r\n          contex.state.autoCompleteKey.push(city);\r\n        }\r\n      })\r\n      .catch( err=>{\r\n        Vue.toasted.show(err.message,contex.getters.toastOptions);\r\n\r\n      })\r\n    }\r\n      \r\n    }\r\n\r\n}\r\n}\r\n\r\nconst mutations = {\r\n\r\n}\r\n\r\nexport default {\r\n  mutations,\r\n  actions,\r\n  getters,\r\n  state\r\n}"]}]}